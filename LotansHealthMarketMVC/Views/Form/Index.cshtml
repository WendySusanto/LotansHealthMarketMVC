@model IEnumerable<LotansHealthMarketMVC.Models.BranchModel>
@{
    ViewData["Title"] = "Form";
}

<div id="smartwizard">
    <ul class="nav">
        <li>
            <a class="nav-link" href="#step-1">
                Start
            </a>
        </li>
        <li>
            <a class="nav-link" href="#step-2">
                Sales Form
            </a>
        </li>
        <li>
            <a class="nav-link" href="#step-3">
                Payment Detail
            </a>
        </li>
        <li>
            <a class="nav-link" href="#step-4">
                Finish
            </a>
        </li>
    </ul>

    <div class="tab-content">
        <!-- <form action=""> -->
        <div id="step-1" class="tab-pane" role="tabpanel">
            <div class="form-group d-flex align-items-center justify-content-between">

                <div class="d-flex align-items-center ">
                    <label class="mb-0 mr-3 control-label mr-2 font-weight-bold" for="transID">Transaction ID</label>
                    <div class="">
                        <input type="text" name="transID" class="form-control" value="LT001" disabled>
                    </div>
                </div>

                <div class="d-flex align-items-center ">
                    <label class="mb-0 mr-3 control-label mr-2 font-weight-bold" for="date">Date</label>
                    <div class="">
                        <input type="date" id="transDate" name="date" class="form-control" value="@DateTime.Now.ToString("yyyy-MM-dd")" disabled>
                    </div>
                </div>
            </div>

            <div class="form-group ">
                <label class=" control-label font-weight-bold" for="branchLoc">Branch Location</label>
                <div class="">
                    <select id="branchloc" name="branchloc" onchange="updateSupervisor(this)" class="form-control">
                        @foreach (var item in Model)
                        {
                            <option value="@item.BranchID" onchange="updateSupervisor(this)">@item.BranchLocation</option>
                        }
                    </select>
                    @*<select id="branchLoc" name="branchLoc" class="form-control" asp-items="@(new SelectList(@ViewBag.Message, "BranchID","BranchLocation"))"></select>*@
                </div>
            </div>

            @*<div class="form-group ">
            <label class=" control-label font-weight-bold" for="cashierName">Cashier Name</label>
            <div class="input-group mb-3">
                <input type="text" name="cashierName" class="form-control" placeholder="Cashier's Name"
                       value="Remigus Arjuna">
                <div class="input-group-append">
                    <button class="btn btn-info" type="button" id="button-addon2"><i class="fas fa-search"></i></button>
                </div>
            </div>
        </div>*@

            <div class="form-group ">
                <label class=" control-label font-weight-bold" for="cashierName">Cashier Name</label>
                <div class="">
                    <select name="cashierName" class="form-control">
                        @*<option value="">Select Cashier's Name</option>*@
                    </select>
                    @*<select id="branchLoc" name="branchLoc" class="form-control" asp-items="@(new SelectList(@ViewBag.Message, "BranchID","BranchLocation"))"></select>*@
                </div>
            </div>

            <div class="form-group ">
                <label class=" control-label font-weight-bold" for="supervisorName">Supervisor Name</label>
                <div class="input-group mb-3">
                    <input type="text" name="supervisorName" class="form-control" placeholder="Supervisor's Name"
                           value="Select" disabled>
                    @*<div class="input-group-append">
                    <button class="btn btn-info" type="button" id="button-addon2"><i class="fas fa-search"></i></button>
                </div>*@
                </div>
            </div>



        </div>
        <div id="step-2" class="tab-pane" role="tabpanel">
            <label for="" class="font-weight-bold">Sales Summary</label>
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th scope="col">No.</th>
                            <th scope="col">Item ID</th>
                            <th scope="col">Item Name</th>
                            <th scope="col">Quantity</th>
                            <th scope="col">Subtotal</th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td scope="row">1</td>
                            <td>2222</td>
                            <td>Otto</td>
                            <td><input type="number" name="" id="" value="1"></td>
                            <td>Rp. 100.000</td>
                            <td><a href="#" class="badge badge-danger"><i class="fas fa-trash"></i></a></td>
                        </tr>

                        <tr>
                            <th colspan="3">Total</th>
                            <td colspan="3">Rp. 100.000</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="form-group ">
                <label class=" control-label font-weight-bold" for="itemID">Item ID</label>
                <div class="input-group mb-3">
                    <input type="text" name="itemID" class="form-control">
                    <div class="input-group-append">
                        <button class="btn btn-info" type="button" id="button-addon2"><i class="fas fa-search"></i></button>
                    </div>
                </div>
            </div>

            <div class="form-group ">
                <label class=" control-label font-weight-bold" for="itemCat">Item Category</label>
                <input type="text" name="itemCat" class="form-control" disabled>
            </div>

            <div class="form-group ">
                <label class=" control-label font-weight-bold" for="itemName">Item Name</label>
                <input type="text" name="itemName" class="form-control" disabled>
            </div>
            <div class="form-group ">
                <label class=" control-label font-weight-bold" for="itemPrice">Item Price</label>
                <input type="text" name="itemPrice" class="form-control" disabled>
            </div>
            <div class="form-group ">
                <label class=" control-label font-weight-bold" for="qty">Quantity</label>
                <input type="text" name="qty" class="form-control">
            </div>

            <button class="btn btn-outline-info">Add Product</button>
        </div>

        <div id="step-3" class="tab-pane" role="tabpanel">

            <h4>Payment Details</h4>
            <div class="d-flex">
                <p class="mr-5" for="">Total</p>
                <p class="font-weight-bold">Rp. 100.000</p>
            </div>
            <div class="form-group ">
                <label class=" control-label font-weight-bold" for="payment">Payment Method</label>
                <div class="">
                    <select id="branchLoc" name="payment" class="form-control ">
                        <option value=""></option>
                    </select>
                </div>
            </div>

            <div class="form-group ">
                <label class=" control-label font-weight-bold" for="paid">Amount Paid</label>
                <input type="text" name="paid" class="form-control">
            </div>
            <div class="form-group ">
                <label class=" control-label font-weight-bold" for="paid">Change</label>
                <input type="text" name="change" class="form-control" disabled>
            </div>
            <button class="btn btn-info">Submit</button>

        </div>

        <div id="step-4" class="tab-pane" role="tabpanel">
            <h2 class="text-center mb-3">Lotan's Health Market</h2>
            <div class="row">
                <div class="col-3">Transaction ID</div>
                <div class="col-3">: LT001</div>

                <div class="col-3">Date</div>
                <div class="col-3">: 14/01/2022</div>
            </div>
            <div class="row">
                <div class="col-3">Cashier Name</div>
                <div class="col-3">: Remigus Arjuna</div>
                <div class="col-3">Branch Location</div>
                <div class="col-3">: Alam Sutera</div>
            </div>
            <hr class="border border-dark">
            <div class="row">
                <div class="col-1">1 </div>
                <div class="col-8">HEVIT-C 1000mg 10s</div>
                <div class="col-3">Rp. 13.600</div>
            </div>
            <div class="row">
                <div class="col-1">1 </div>
                <div class="col-8">Fitkom Gummy Calcium X16Gr</div>
                <div class="col-3">Rp. 22.500</div>
            </div>

            <hr class="border border-dark">

            <div class="row">
                <div class="col-6">
                </div>
                <div class="col-3">Total</div>
                <div class="col-3"> Rp 36.000</div>
            </div>

            <div class="row">
                <div class="col-6">
                </div>
                <div class="col-3">Payment</div>
                <div class="col-3"> Cash</div>
            </div>

            <div class="row">
                <div class="col-6">
                </div>
                <div class="col-3">Amount Paid</div>
                <div class="col-3"> Rp 40.000</div>
            </div>

            <div class="row">
                <div class="col-6">
                </div>
                <div class="col-3">Change</div>
                <div class="col-3"> Rp. 3.900</div>
            </div>


            <button class="btn btn-info" id="complete">Complete</button>

        </div>
        <!-- </form> -->
    </div>
</div>

@section Scripts {
    <script>

        $('select[name="branchloc"]').val();

        $(document).ready(function () {
            $('select[name="branchloc"]').amsifySelect({
                type: 'bootstrap',
                searchable: true
            }, 'refresh');
        });

        $.ajax({
            url: "/Form/GetAllCashierName",
            method: "POST",
            dataType: "json",
            error: function (e) {
                alert('Failed to retrieve cashier name!');
            },
            complete: function (data) {
                var obj = JSON.parse(data.responseText);
                var length = Object.keys(obj.data).length;
                for (var i = 0; i < length ; i++){
                    $('select[name="cashierName"]').append(new Option(obj.data[i].cashierName, obj.data[i].cashierID));
                }

                $('select[name="cashierName"]').amsifySelect({
                    type: 'bootstrap',
                    searchable: true
                }, 'refresh');

                }
            });

        //$('select[name="cashierName"]').change(function () {
        //    alert($(this).val());
        //});

        

        function updateSupervisor(element) {
            var branch_id = $(element).val();

            $.ajax({
                url: "/Form/GetSupervisorByBranch",
                method: "POST",
                dataType: "json",
                data: {
                    'branch_id': branch_id
                },
                error: function (e) {
                    alert('Supervisor not found!');
                },
                complete: function (data) {
                    var obj = JSON.parse(data.responseText);
                    $('input[name="supervisorName"]').val(obj.data);
                }
            })
        }

    </script>
}